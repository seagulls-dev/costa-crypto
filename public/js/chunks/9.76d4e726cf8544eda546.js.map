{"version":3,"sources":["webpack:///./resources/components/AsyncTable/index.js","webpack:///./resources/components/Widget/index.js"],"names":["AsyncTable","pagination","state","current","filters","route","props","data","loading","item","predicate","key","o","records","index","i","nextFilters","total","page","otherProps","Component","Widget","styleName"],"mappings":"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","file":"js/chunks/9.76d4e726cf8544eda546.js","sourcesContent":["import React, {Component} from 'react';\r\nimport ApiService from \"support/Services/Api\";\r\nimport Pagination from \"support/Helpers/Pagination\";\r\nimport {Table} from \"antd\";\r\nimport {assign, findIndex, remove} from \"lodash\";\r\n\r\nclass AsyncTable extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tconst {route, pagination, filters} = props;\r\n\t\tthis.api = new ApiService();\r\n\t\tthis.pagination = new Pagination(this.api, route);\r\n\r\n\t\tthis.state = {\r\n\t\t\tdata       : [],\r\n\t\t\tpagination : pagination || {},\r\n\t\t\tfilters    : filters || {},\r\n\t\t\tloading    : false,\r\n\t\t};\r\n\t}\r\n\r\n\tupdateItem(item, predicate) {\r\n\t\tconst key = this.props.rowKey || \"id\";\r\n\t\tpredicate = typeof predicate !== \"function\" ? function (o) {\r\n\t\t\treturn o[key] === item[key];\r\n\t\t} : predicate;\r\n\r\n\t\tlet records = [...this.state.data];\r\n\t\tconst index = findIndex(records, predicate);\r\n\t\tif (index >= 0) {\r\n\t\t\trecords[index] = item;\r\n\t\t}\r\n\t\tthis.setState({data : records});\r\n\t}\r\n\r\n\tremoveItem(item, predicate) {\r\n\t\tconst key = this.props.rowKey || \"id\";\r\n\t\tpredicate = typeof predicate !== \"function\" ? function (o) {\r\n\t\t\treturn o[key] === item[key];\r\n\t\t} : predicate;\r\n\r\n\t\tlet records = [...this.state.data];\r\n\t\tconst index = findIndex(records, predicate);\r\n\t\tif (index >= 0) {\r\n\t\t\tremove(records, function (v, i) {\r\n\t\t\t\treturn i === index;\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.setState({data : records});\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.fetchData();\r\n\t}\r\n\r\n\tapplyFilter(nextFilters) {\r\n\t\tthis.setState(({pagination, filters}) => {\r\n\t\t\treturn {\r\n\t\t\t\tpagination : assign(pagination, {current : 1}),\r\n\t\t\t\tfilters    : assign(filters, nextFilters)\r\n\t\t\t}\r\n\t\t}, () => {\r\n\t\t\tthis.fetchData()\r\n\t\t});\r\n\t}\r\n\r\n\tclearFilter() {\r\n\t\tthis.setState(({pagination}) => {\r\n\t\t\treturn {\r\n\t\t\t\tfilters    : {},\r\n\t\t\t\tpagination : assign(pagination, {current : 1}),\r\n\t\t\t}\r\n\t\t}, () => {\r\n\t\t\tthis.fetchData()\r\n\t\t});\r\n\t}\r\n\r\n\tfetchData() {\r\n\t\tconst {pagination, filters} = this.state;\r\n\r\n\t\tthis.pagination.fetchData(\r\n\t\t\tpagination, filters, (page) => {\r\n\t\t\t\tthis.setState((state) => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tpagination : {\r\n\t\t\t\t\t\t\t...state.pagination,\r\n\t\t\t\t\t\t\ttotal : typeof page.total !== \"undefined\" ? page.total : page.meta.total\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tdata       : page.data,\r\n\t\t\t\t\t\tloading    : false\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}, () => {\r\n\t\t\t\tthis.setState({loading : false})\r\n\t\t\t}\r\n\t\t);\r\n\t\tthis.setState({loading : true});\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.api.cancel()\r\n\t}\r\n\r\n\thandleTableChange = (pagination, filters) => {\r\n\t\tthis.setState((state) => {\r\n\t\t\treturn {\r\n\t\t\t\tpagination : {\r\n\t\t\t\t\t...state.pagination,\r\n\t\t\t\t\tcurrent : pagination.current\r\n\t\t\t\t},\r\n\t\t\t\tfilters    : {\r\n\t\t\t\t\t...state.filters, ...filters\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t}, () => {\r\n\t\t\tthis.fetchData();\r\n\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\troute, pagination, filters, ...otherProps\r\n\t\t} = this.props;\r\n\r\n\t\tconst {loading, data} = this.state;\r\n\r\n\t\treturn (\r\n\t\t\t<Table size=\"middle\" rowKey=\"id\"\r\n\t\t\t       {...otherProps}\r\n\t\t\t       pagination={this.state.pagination}\r\n\t\t\t       onChange={this.handleTableChange}\r\n\t\t\t       dataSource={data}\r\n\t\t\t       loading={loading}/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default AsyncTable;","import React from \"react\";\r\nimport {Card} from \"antd\";\r\n\r\nconst Widget = ({styleName, ...otherProps}) => {\r\n\treturn (\r\n\t\t<Card bordered={false}\r\n\t\t      className={`cp-card-widget ${styleName}`}\r\n\t\t      {...otherProps}/>\r\n\t)\r\n};\r\n\r\nWidget.defaultProps = {\r\n\tstyleName : '',\r\n};\r\n\r\nexport default Widget;\r\n"],"sourceRoot":""}